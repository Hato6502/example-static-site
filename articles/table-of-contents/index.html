<!doctype html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-106651880-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-106651880-2');
    </script>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script> (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-7008780049786244",
    enable_page_level_ads: true
    });
    </script>

      <meta charset="utf-8">
<title>ã€jQueryä¸è¦ã€‘JS ã§ç« ç•ªå· &amp; ãƒªãƒ³ã‚¯ä»˜ãã®ç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ - Hood</title>
 <meta name="description" content="å†…å®¹ã‚’ã²ã¨ç›®ã§ç¢ºèªã§ãã‚‹ç›®æ¬¡ã‚’ã€JavaScript ã§è‡ªå‹•ç”Ÿæˆã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ•´ãˆã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚"> <meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@bluehood_admin">
<meta property="og:url" content="https://b-hood.site/articles/table-of-contents/">
<meta property="og:title" content="ã€jQueryä¸è¦ã€‘JS ã§ç« ç•ªå· &amp; ãƒªãƒ³ã‚¯ä»˜ãã®ç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹">
 <meta property="og:description" content="å†…å®¹ã‚’ã²ã¨ç›®ã§ç¢ºèªã§ãã‚‹ç›®æ¬¡ã‚’ã€JavaScript ã§è‡ªå‹•ç”Ÿæˆã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ•´ãˆã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚"> <meta property="og:image" content="https://b-hood.site/storage/articles/images/5b213ef0.jpg">

<link rel="canonical" href="https://b-hood.site/articles/table-of-contents/">
<link rel="icon" href="https://b-hood.site/images/favicon@32px.png" sizes="32x32">
<link rel="icon" href="https://b-hood.site/images/favicon@192px.png" sizes="192x192">

    <link href="/css/app.css" rel="stylesheet">
      <link rel="stylesheet" href="https://b-hood.site/css/social-button.css" />
  </head>
  <body>
    <nav>
  <div>
    <a href="https://b-hood.site/"><h1>Hood</h1></a>
    <div class="nav-menu">
      
      <a href="https://b-hood.site/articles/">Articles</a>
      <a href="https://github.com/blue-hood" target="_blank">GitHub</a>
      <a href="https://twitter.com/bluehood_admin" target="_blank">Twitter</a>
      <a href="https://miniblog.bluehood.net" target="_blank">MiniBlog</a>
    </div>
    <div class="hamburger-button">Menu</div>
  </div>
</nav>
      <article class="articles-show">
    <div>
      <div>2019-05-02</div>
      <h1>ã€jQueryä¸è¦ã€‘JS ã§ç« ç•ªå· &amp; ãƒªãƒ³ã‚¯ä»˜ãã®ç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹</h1>
      <div class="content">
        <picture>
  <source type="image/webp" srcset="/storage/articles/images/5b213ef0.webp 1x,/storage/articles/images/62fd5d1b.webp 2x">
  <img src="/storage/articles/images/5b213ef0.jpg" srcset="/storage/articles/images/62fd5d1b.jpg 2x">
</picture>
<p>WordPress è£½ã®ã‚µã‚¤ãƒˆãªã©ã§è¦‹ã‹ã‘ã‚‹<strong>ç›®æ¬¡</strong>ã€‚
ãã®ãƒšãƒ¼ã‚¸ã®å†…å®¹ãŒãƒªã‚¹ãƒˆã¨ã—ã¦ã²ã¨ç›®ã§ç¢ºèªã§ãã‚‹ãŸã‚ã€Web ã‚µã‚¤ãƒˆã«ã‚‚å¤§ããªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚
JavaScript ã§ç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p>
<p style="text-align: center; "><b>â†“ã“ã®ç›®æ¬¡ã®ã“ã¨ã§ã™ï¼</b></p>
<ol class="table-of-contents"></ol>
<h2>JavaScript ã§ç›®æ¬¡ã‚’ä½œã‚‹</h2>
<p>åŸºæœ¬çš„ã«è¦‹å‡ºã—ã¯ h1ã€œh6 ã§ã‚¿ã‚°ä»˜ã‘ã•ã‚Œã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
ã“ã‚Œã‚‰ã®ã‚¿ã‚°ã«ã¯è¦‹å‡ºã—ã¨ã„ã†æƒ…å ±ã ã‘ã§ãªãã€<strong>è¦‹å‡ºã—ã©ã†ã—ã®éšå±¤é–¢ä¿‚</strong>ã‚‚è¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã‚ˆã£ã¦ã€h1ã€œh6 ã‚¿ã‚°ã¯ç›®æ¬¡ã‚’ä½œã‚‹ã®ã«æœ€é©ãªæƒ…å ±æºã¨è¨€ãˆã¾ã™ã€‚</p>
<p>ç›®æ¬¡ã‚’ç½®ãå ´æ‰€ã« <code>&lt;ol class="table-of-contents"&gt;&lt;/ol&gt;</code> ã‚’é…ç½®ã—ã¦ã€ã“ã®è¦ç´ ã®ãªã‹ã« JavaScript ã§ç›®æ¬¡ã®æƒ…å ±ã‚’æ›¸ãè¾¼ã‚“ã§ã„ãã¾ã™ã€‚</p>
<p><script src="https://gist.github.com/Hato6502/e10e01e891fa9abd56eda3d6beedeef0.js"></script></p>
<p>ä¸Šè¨˜ãŒç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ JavaScript ã®å®Œæˆå½¢ã«ãªã‚Šã¾ã™ã€‚</p>
<h3>QuerySelectorAll ã§ h1ã€œh6 ã‚¿ã‚°ã‚’æ¢ã™</h3>
<pre class="prettyprint linenums">
const table_of_contents = document.querySelectorAll(".table-of-contents");
const headings = table.parentElement.querySelectorAll("h1, h2, h3, h4, h5, h6");
</pre>
<p>ã¾ãšã¯ <code>.table-of-contents</code> ã‚’è¨­ç½®ã—ãŸè¦ªè¦ç´ ã‹ã‚‰ã€h1ã€œh6 è¦ç´ ã‚’æ¢ã—å‡ºã—ã¾ã™ã€‚</p>
<h3>h1ã€œh6 ã‚¿ã‚°ã‚’å…ƒã«ç›®æ¬¡è¦ç´ ã‚’ç”Ÿæˆ</h3>
<pre class="prettyprint linenums">
const li = document.createElement("li");
const a = document.createElement("a");
const id = `section-${table_of_contents_counter++}`;
const ol = document.createElement("ol");

// ç›®æ¬¡è¦ç´ ã®ç”Ÿæˆ
a.textContent = heading.textContent;
a.href = `#${id}`;
li.appendChild(a);
li.appendChild(ol);
</pre>
<p>æ¢ã—å‡ºã—ãŸh1ã€œh6 ã‚¿ã‚°ãŒå¤‰æ•° <code>heading</code> ã«å…¥ã£ã¦ãƒ«ãƒ¼ãƒ—å‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚
ã¾ãšã¯ç›®æ¬¡ï¼‘è¡Œåˆ†ã«ç›¸å½“ã™ã‚‹ li è¦ç´ ã‚’ç”Ÿæˆã—ã€ãã®ãªã‹ã« a è¦ç´ ã¨ ol è¦ç´ ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚
a è¦ç´ ã«ã¯ h1ã€œh6 ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥ã‚Œã¦ã€ã•ã‚‰ã«ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã¨ã—ã¦ href å±æ€§ã« <code>#section-${table_of_contents_counter++}</code> ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚
å¤‰æ•° <code>table_of_contents_counter</code> ã¯1ã€2ã€3â€¦ã¨å¢—åˆ†ã—ã¦ã„ãã®ã§ã€ç”Ÿæˆã•ã‚Œã‚‹ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã‚‚ #section-1ã€#section-2ã€â€¦ã¨ãªã‚Šã¾ã™ã€‚
ol è¦ç´ ã¯ã€è¦‹å‡ºã—ã®éšå±¤æ§‹é€ ã‚’ä½œã‚‹ãŸã‚ã«å¾Œã§å¿…è¦ã¨ãªã‚Šã¾ã™ã€‚</p>
<h3>h1ã€œh6 ã‚¿ã‚°ã«ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã‚‚ç´ä»˜ã‘</h3>
<pre class="prettyprint linenums">
// ãƒªãƒ³ã‚¯å…ˆã®ç”Ÿæˆ
heading.id = id;
heading.classList.add("anchor-link");
</pre>
<p>ç”Ÿæˆã—ãŸã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã‚’ h1ã€œh6 ã‚¿ã‚°ã® id ã«è¨­å®šã—ã€ç›®æ¬¡ã®è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ãƒšãƒ¼ã‚¸å†…ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
ã•ã‚‰ã«ã€å¿…è¦ã§ã‚ã‚Œã° anchor-link ã‚¯ãƒ©ã‚¹ã‚’ä»˜ã‘ã¦ CSS ã§ãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´ã—ã¾ã—ã‚‡ã†ã€‚</p>
<h3>éšå±¤æ§‹é€ ã®ç”Ÿæˆ</h3>
<pre class="prettyprint linenums">
// éšå±¤æ§‹é€ ã®ç”Ÿæˆ
const level = Number(heading.tagName.substring(1));
let parent;
do {
    parent = stack.pop();
} while (parent.level >= level);
parent.element.appendChild(li);
stack.push(parent);
stack.push({ level: level, element: ol });
</pre>
<p>æœ€å¾Œã«ã€ç”Ÿæˆã—ãŸ li è¦ç´ ã‚’ç›®æ¬¡ã«æŒ¿å…¥ã—ã¾ã™ã€‚
ã“ã®ã¨ãã€h1ã€œh6 ã‚¿ã‚°ã®<strong>ãƒ¬ãƒ™ãƒ«</strong>(h1â†’1ã€h2â†’2ã€â€¦)ã«å¿œã˜ã¦ã€li è¦ç´ ã®æŒ¿å…¥å…ˆãŒå¤‰ã‚ã‚Šã¾ã™ã€‚</p>
<p>ãŸã¨ãˆã°ã€h1 ã‚¿ã‚°ã®æ¬¡ã« h2 ã‚¿ã‚°ãŒã‚ã‚‹å ´åˆã¯ã€h1 ã‚¿ã‚°ã®è¦‹å‡ºã—ã®é…ä¸‹ã« h2 ã‚¿ã‚°ãŒã‚ã‚‹ã€ã¨åˆ¤å®šã—ã¾ã™ã€‚
ã“ã®ãƒ¬ãƒ™ãƒ«ã®æ¯”è¼ƒã«ã‚ˆã£ã¦ã€ã©ã®ç›®æ¬¡è¦ç´ ã®é…ä¸‹ã«æ–°ã—ã„ li è¦ç´ ã‚’æŒ¿å…¥ã™ã‚‹ã‹ã‚’ã€ä¸Šè¨˜ 4ã€œ7 è¡Œç›®ã§è¡Œã£ã¦ã„ã¾ã™ã€‚</p>
<h2>CSS ã§è¦‹å‡ºã—ã®ç•ªå·ã‚’ä»˜ã‘ã‚‹</h2>
<p>JavaScript ã§ç”Ÿæˆã—ãŸç›®æ¬¡ã«ã¯ä½•ã® CSS ã‚‚é©ç”¨ã—ã¦ã„ãªã„ãŸã‚ã€è¦‹å‡ºã—ã®ç•ªå·ãŒæ­£ã—ãä»˜ã‹ãªã„ã¨æ€ã„ã¾ã™ã€‚</p>
<pre class="prettyprint lang-html">
1. h1 ã‚¿ã‚°
  1. h2 ã‚¿ã‚°
  2. h2 ã‚¿ã‚°
2. h1 ã‚¿ã‚°
</pre>
<p>ã“ã‚Œã‚’ã€CSS ã§æ­£ã—ãç•ªå·ã‚’æŒ¯ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<pre class="prettyprint linenums">
.table-of-contents {
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
  border: 2px solid rgba(0,0,0,0.1);
  padding: 0.5rem 1rem;
}
.table-of-contents::before {
  content: "ç›®æ¬¡";
  font-weight: 700;
}
.table-of-contents ol {
  counter-reset: ol-counter;
}
.table-of-contents ol li {
  position: relative;
  list-style: none;
}
.table-of-contents ol li::before {
  counter-increment: ol-counter;
  content: counters(ol-counter,".");
  padding-right: 0.5rem;
  position: absolute;
  top: 0;
  left: -40px;
  display: inline-block;
  text-align: right;
  width: 40px;
}
</pre>
<pre class="prettyprint lang-html">
1 h1 ã‚¿ã‚°
  1.1 h2 ã‚¿ã‚°
  1.2 h2 ã‚¿ã‚°
2 h1 ã‚¿ã‚°
</pre>
<h3>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç•ªå·ä»˜ã‘ã‚’ç„¡åŠ¹åŒ–</h3>
<p>ã¾ãšã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç•ªå·ä»˜ã‘ã‚’ç„¡åŠ¹ã—ã¾ã™ã€‚</p>
<pre class="prettyprint linenums">
.table-of-contents ol li {
  list-style: none;
}
</pre>
<h3>counters ã§ç•ªå·ã‚’ä½œã‚‹</h3>
<pre class="prettyprint linenums">
.table-of-contents ol {
  counter-reset: ol-counter;
}
.table-of-contents ol li::before {
  counter-increment: ol-counter;
  content: counters(ol-counter,".");
}
</pre>
<p>CSS ã«ã¯ counters ã¨ã„ã†ã€ç•ªå·ã‚’è‡ªå‹•ã§æŒ¯ã‚‹ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
ol è¦ç´ ã‚’ç•ªå·æŒ¯ã‚Šã®åŸç‚¹ã¨ã—ã¦ã€ä»¥é™ã¯ li è¦ç´ ãŒæ¥ã‚‹ãŸã³ã«ã‚«ã‚¦ãƒ³ã‚¿ã‚’ +1 ã—ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚
ãã®ä»–ã€ç›®æ¬¡ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ•´ãˆã‚‹ãŸã‚ã« <code>position: absolute;</code> ã¨ã‹ã—ã¦ã„ã¾ã™ãŒã€ã“ã“ã§ã¯çœç•¥ã„ãŸã—ã¾ã™ğŸ™‡</p>
<h2>ï¼‘ã‹ã‚‰ã‚µã‚¤ãƒˆã‚’ä½œã‚‹ã®ã¯æ¥½ã—ã„</h2>
<p>WordPress ã‚’ä½¿ãˆã°ã€ç›®æ¬¡ã‚’ç”Ÿæˆã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚ã‚ã‚Šã¾ã™ã—ãƒ‡ã‚¶ã‚¤ãƒ³ã‚‚æ´—ç·´ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã—ã‹ã—ã€ï¼‘ã‹ã‚‰ã‚µã‚¤ãƒˆã‚’ä½œã‚‹ã®ã‚‚ã€JavaScript ã‚„ CSS ã®å‹‰å¼·ã¨ã—ã¦ã„ã„ã‹ãªã¨æ€ã„ã¾ã™ï¼
ç§ã®å ´åˆã¯ã€ï¼‘ã‹ã‚‰ä½œã‚ã†ã¨ã—ã¦ã¤ã¾ã¥ã„ãŸã“ã¨ãŒã€ãã®ã¾ã¾è¨˜äº‹ã¨ã—ã¦æ›¸ã‘ã¦è‰¯ã„å¾ªç’°ã«ãªã£ã¦ã„ã¾ã™ğŸ˜Š</p>

        <div id="social"></div>
      </div>
      <h3>ã“ã®è¨˜äº‹ã®åŸ·ç­†è€…</h3>
      <div class="author">
        <picture>
          <source type="image/webp" srcset="https://b-hood.site/storage/authors/images/hato6502.webp 1x">
          <img src="https://b-hood.site/storage/authors/images/hato6502.png" alt="hato6502">
        </picture>
        <div>
          <h4>hato
            &emsp;<a href="https://twitter.com/bluehood_admin?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-screen-name="false" data-show-count="false">Follow @bluehood_admin</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            
          </h4>
          <p>
            ä¸­å­¦ç”Ÿã®é ƒã« 6502 ã¨ã„ã† CPU ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ä¸–ç•Œã«å…¥ã‚Šã¾ã—ãŸã€‚
            C/C++ ã§ï¼‘ã‹ã‚‰ä½œã‚‹ã“ã¨ã‚‚å¥½ãã§ã™ãŒã€æœ€è¿‘ã¯å¤‰åŒ–ã®æ¿€ã—ã„ IT æ¥­ç•Œã‚’ã¿ã¦ Web ç³»ã«ã‚·ãƒ•ãƒˆã—ã¤ã¤ã‚ã‚Šã¾ã™ã€‚
          </p>
        </div>
      </div>
    </div>
  </article>

    <footer>
  <div>
    2019 Hood<br>
    <a href="https://github.com/blue-hood/apps" target=â€_blankâ€>Published</a> under the MIT license. <br>
    <a href="https://b-hood.site/privacy/">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
  </div>
</footer>
    <script src="/js/app.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://b-hood.site/js/social-button.js"></script>
  </body>
</html>
